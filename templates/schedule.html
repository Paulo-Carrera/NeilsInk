{% extends 'base.html' %}

{% block content %}

{% block page_header %}
{% endblock %}

<div class="container mt-5 schedule-form-container" style="margin-top: 20px; margin-bottom: 100px;">
    <h2 style="margin-top: 60px;" class="schedule-page-header">$15 DEPOSIT REQUIRED</h2>

    <!-- Conditional Payment Details -->
    <div id="paypal-info" class="payment-details text-white" style="display: block; padding-bottom: 20px;">
        <h3 class="text-center text-white">PayPal</h3>
        <div class="img-div">
            <img src="{{ url_for('static', filename='qrcodes/paypal.png') }}" alt="PayPal QR Code" class="qr-code img-fluid mx-auto d-block">
        </div>
        <h5 class="text-center">SCAN THE QR CODE TO PAY WITH PAYPAL</h5>
    </div>

    <div id="cashapp-info" class="payment-details text-white" style="display: none; padding-bottom: 20px;">
        <h3 class="text-center text-white">Cash App</h3>
        <div class="img-div-cashapp">
            <img src="{{ url_for('static', filename='qrcodes/cashapp.png') }}" alt="Cash App QR Code" class="qr-code img-fluid mx-auto d-block">
        </div>
        <h5 class="text-center">SCAN THE QR CODE TO PAY WITH CASH APP</h5>
    </div>

    <div id="venmo-info" class="payment-details text-white" style="display: none; padding-bottom: 20px;">
        <h3 class="text-center text-white">Venmo</h3>
        <div class="img-div-venmo">
            <img src="{{ url_for('static', filename='qrcodes/venmo.png') }}" alt="Venmo QR Code" class="qr-code img-fluid mx-auto d-block">
        </div>
        <h5 class="text-center">SCAN THE QR CODE TO PAY WITH VENMO</h5>
    </div>

    <!-- Payment Method Selection -->
    <div class="mb-3">
        <label class="form-label text-white">Payment Method</label>
        <select name="payment_method" class="form-select" id="payment-method-select">
            <option value="paypal">PayPal</option>
            <option value="cash_app">Cash App</option>
            <option value="venmo">Venmo</option>
        </select>
    </div>

    <!-- Navigation Buttons -->
    <div style="text-align: center; margin-top: 20px;">
        <a href="/" class="button-59">BACK</a>
        <a href="/appointment" class="button-59">PAY IN PERSON</a>
        <a href="/appointment" class="button-59">NEXT</a>
    </div>
</div>

<!-- CSS -->
<style>
    .page-header {
        z-index: 1;
    }

    header {
        position: sticky;
        top: 0;
        z-index: 1;
    }

    label {
        color: white;
        font-size: 1.5rem;
    }

    .img-div, .img-div-venmo, .img-div-cashapp {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px 0;
        background-color: white;
        max-width: 400px;
        margin: 0 auto;
    }

    /* Adjust specific Cash App QR code styling */
    .img-div-cashapp {
        align-items: flex-start; /* Align to top */
        padding-top: 10px; /* Adjust spacing */
    }

    .form-select{
        cursor: pointer;
    }
    /* QR code shared size */
    .qr-code {
        width: 300px;
        height: 300px;
        object-fit: cover;
    }

    .img-div, .img-div-venmo, .img-div-cashapp {
        border: 1px solid #4b2f1a;
    }

    .schedule-form-container {
    position: relative; /* Ensure the background image and overlay are positioned correctly */
    margin-top: 20px;
    border-color: #4b2f1a;
    border-style: solid;
    border-width: 1px;
    padding: 10px;
    height: 100%;
    background-image: url('https://storage.googleapis.com/webdesignledger.pub.network/LaT/edd/2016/02/green-colored-smoke-texture-2-780x585.jpg'); /* Set your background image */
    background-size: cover; /* Ensure the image covers the entire div */
    background-position: center; /* Center the image */
    background-repeat: no-repeat; /* Prevent the image from repeating */
    border-radius: 0px;
}

/* Add green tint overlay */
.schedule-form-container::before {
    content: ""; /* Empty content to create the pseudo-element */
    position: absolute; /* Position it over the background */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(120, 151, 133, 0.6); /* Green tint with transparency */
    z-index: 0; /* Make sure the overlay is below the content */
}

/* Ensure the content stays above the background and overlay */
.schedule-form-container > * {
    position: relative; /* Ensure that the content stays above the background and overlay */
    z-index: 1;
}


    .schedule-page-header {
        margin-bottom: 30px;
        color: #412612;
        background-color: white;
        padding: 20px;
        border-width: 1px;
        border-style: solid;
        border-color: #255238;
        text-align: center;
    }

    /* .button-59 {
        margin: 10px;
        padding: 10px 20px;
        background-color: #255238;
        color: white;
        text-decoration: none;
        border-radius: 5px;
    } */

    .button-59:hover {
        background-color: #1b3c29;
    }
</style>

<!-- Include Flatpickr CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<!-- Include Flatpickr JS -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const paymentMethodField = document.querySelector('select[name="payment_method"]');
        const paymentDetails = {
            paypal: document.getElementById('paypal-info'),
            cash_app: document.getElementById('cashapp-info'),
            venmo: document.getElementById('venmo-info')
        };

        function updatePaymentDetails() {
            const selectedMethod = paymentMethodField.value;
            Object.keys(paymentDetails).forEach(method => {
                paymentDetails[method].style.display = method === selectedMethod ? 'block' : 'none';
            });
        }

        paymentMethodField.addEventListener('change', updatePaymentDetails);
        updatePaymentDetails();
    });
</script>

{% endblock %}
