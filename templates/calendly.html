{% extends 'base.html' %}

{% block content %}

{% block page_header %}
{% endblock %}

<div class="container mt-5 schedule-form-container" style="padding: 60px 20px;">

    <!-- Calendly Embed Code -->
    <div class="calendly-widget-container">
        <div class="calendly-inline-widget" data-url="https://calendly.com/carreraservices3456/tattoo-piercing" style="min-width:320px;height:630px; width: 100%; max-width: 800px;"></div>
    </div>
    <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>

    <div style="text-align:center">
        <p><small>You will receive a confirmation email once your appointment is confirmed.</small></p>
    </div>

    <div class="buttons text-center mt-4" style="text-align: center; margin-top: 20px;">
        <a href="/schedule-appointment" class="button-59" style="margin-top:10px">BACK</a>
        <a href="javascript:void(0);" id="doneButton" class="button-59" style="margin-top:10px">DONE</a>
    </div>
</div>

<!-- Success Popup -->
<div id="successPopup" class="success-popup">
    <div class="popup-content">
        <div class="checkmark-container">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 13l4 4L19 7"></path>
            </svg>
        </div>
        <!-- <p class="popup-message">Your appointment has been successfully scheduled!</p> -->
    </div>
</div>

<!-- CSS -->
<style>
    /* Ensure header stays on top */
    label {
        color: white;
        font-size: 1.5rem;
    }

    /* QR Code Image Containers */
    .img-div, .img-div-venmo {
        display: flex;
        justify-content: center;
        align-items: center;
        align-self: center;
        padding: 20px 0;
        background-color: white;
        border-radius: 0px;
        max-width: 400px;
        margin: 0 auto; /* Center the container itself */
    }

    /* Calendly widget container */
    .calendly-widget-container {
        display: flex;
        justify-content: center; /* Centers horizontally */
        align-items: center; /* Centers vertically */
        padding: 20px; /* Optional padding around the widget */
        background-color: #f7f7f7; /* Light background color */
        width: 100%; /* Takes full width of the parent container */
        max-width: 800px; /* Set a reasonable maximum width */
        margin: 0 auto; /* Centers the container itself horizontally */
        min-height: 630px; /* Ensures the height is sufficient for the Calendly widget */
    }

    /* General container settings */
    .schedule-form-container {
        z-index: 1; /* Ensures it does not overlap the header */
        position: relative;
        max-width: 1000px;
        margin: 0 auto;
        padding: 60px 20px;
        border-radius: 0;
        height: 100%;
    }

    /* Space between sections */
    .schedule-page-header {
        margin-bottom: 30px;
        color: #412612;
        background-color: white;
        padding: 20px;
        border-radius: 0;
        border-width: 1px;
        border-style: solid;
        border-color: #255238;
        text-align: center;
    }

    /* Payment details alignment */
    .payment-details img {
        margin-bottom: 20px;
    }

    /* Success Popup */
    .success-popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        text-align: center;
        z-index: 9999;
    }

    .popup-content {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .checkmark-container svg {
        animation: checkmarkAnimation 1s ease-in-out;
    }

    .popup-message {
        font-size: 1.2rem;
        color: #4CAF50;
        margin-top: 20px;
        font-weight: bold;
    }

    /* Keyframes for the checkmark animation */
    @keyframes checkmarkAnimation {
        0% {
            transform: scale(0);
            opacity: 0;
        }
        50% {
            transform: scale(1.2);
            opacity: 1;
        }
        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    /* Responsive adjustments */
/* Responsive adjustments */
@media (max-width: 768px) {
    .calendly-widget-container {
        margin-top: 40px;
        padding: 10px;
    }
    .schedule-page-header {
        font-size: 1.5rem;
    }
    .buttons {
        display: flex;
        flex-direction: column;
        align-items: center; /* Ensure buttons are centered horizontally */
    }

    /* Make the buttons stack on top of each other */
    .button-59 {
        display: inline-block;  /* Change from block to inline-block */
        width: 60%;  /* Let the width be determined by content */
        margin: 2px 0; /* Adds spacing between buttons */
        padding-top: 10px;
        text-align: center;
    }
}

</style>

<!-- JavaScript for Popup Animation -->
<script>
    document.getElementById("doneButton").addEventListener("click", function() {
        const popup = document.getElementById("successPopup");
        popup.style.display = "block"; // Show the popup

        // Optionally, hide the popup after a few seconds and redirect to the home page
        setTimeout(function() {
            popup.style.display = "none"; // Hide the popup after 3 seconds
            window.location.href = '/'; // Redirect to home page
        }, 3000);
    });
</script>

{% endblock %}
